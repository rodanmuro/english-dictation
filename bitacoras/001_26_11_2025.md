# Bitácora 001 - 26/11/2025

## Phase 1: Project Setup - COMPLETED ✅

### Objective
Set up the complete project structure and configuration files for the English Dictation App MVP.

---

## Work Completed

### 1. Directory Structure Created

Created the complete application directory structure:

```
english-dictation/
├── app/
│   ├── __init__.py
│   ├── main.py                      # FastAPI app entry point
│   ├── config.py                    # Configuration settings
│   │
│   ├── services/                    # Business logic layer
│   │   ├── __init__.py
│   │   ├── youtube_service.py       # YouTube audio download
│   │   ├── deepgram_service.py      # AI transcription (Deepgram)
│   │   ├── srt_parser.py            # Parse SRT to JSON
│   │   └── cache_service.py         # Caching system
│   │
│   ├── routes/                      # API endpoints
│   │   ├── __init__.py
│   │   ├── video_routes.py          # Video processing API
│   │   └── page_routes.py           # HTML page routes
│   │
│   ├── templates/                   # Jinja2 HTML templates
│   │
│   ├── static/                      # Static assets
│   │   ├── css/                     # Stylesheets
│   │   ├── js/                      # JavaScript files
│   │   └── audios/                  # Audio files and SRT files
│   │
│   └── utils/                       # Utility functions
│       ├── __init__.py
│       └── video_utils.py           # YouTube URL parsing
│
├── planning/
│   └── MVP_IMPLEMENTATION_PLAN.md   # Implementation plan
│
├── bitacoras/                       # Work logs (this folder)
├── requirements.txt                 # Python dependencies
├── .env.example                     # Environment variables template
├── .gitignore                       # Git ignore rules
└── README.md                        # Project documentation
```

**Total:** 11 directories, 16 files created

---

### 2. Configuration Files

#### requirements.txt
Created Python dependencies file with the following packages:
- `fastapi>=0.104.0` - Web framework
- `uvicorn[standard]>=0.24.0` - ASGI server
- `jinja2>=3.1.2` - Template engine
- `python-multipart>=0.0.6` - Form data handling
- `yt-dlp>=2024.0.0` - YouTube download
- `deepgram-sdk>=3.0.0` - AI transcription
- `deepgram-captions>=1.0.0` - Subtitle conversion
- `python-dotenv>=1.0.0` - Environment variables
- `aiofiles>=23.0.0` - Async file operations
- `pydantic-settings>=2.0.0` - Settings management

#### .env.example
Created environment variables template:
- `DEEPGRAM_API_KEY` - API key for Deepgram transcription service
- `AUDIO_DIR` - Directory path for storing audio files

#### .gitignore
Created Git ignore file to exclude:
- Environment files (`.env`)
- Python cache files (`__pycache__/`, `*.pyc`)
- Audio files (`*.mp3`) - can be regenerated
- Cache file (`cache.json`) - can be regenerated
- IDE files (`.vscode/`, `.idea/`)
- OS files (`.DS_Store`, `Thumbs.db`)
- Virtual environments (`.venv/`, `venv/`)

---

### 3. Documentation

#### README.md
Created comprehensive project documentation including:

**Sections:**
- Project description and features
- How it works (user flow)
- Technology stack
- Installation instructions
  - Prerequisites (Python, FFmpeg, Deepgram API key)
  - Setup steps (clone, venv, install, configure)
- Running the application
- Usage guide
- Project structure overview
- API endpoints documentation
- Development notes
- Credits

**Key Features Documented:**
- Turn any YouTube video into dictation exercise
- AI-powered transcription
- Real-time typing validation
- Error tracking and progress monitoring
- Segment replay and navigation
- Smart caching for reuse

---

## Architecture Decisions Documented

From the implementation plan:

1. **Storage:** SRT files on filesystem (`app/static/audios/*.srt`)
2. **Cache:** Simple JSON file (`cache.json`)
3. **Progress Updates:** Simple polling (every 2 seconds)
4. **Data Structure:** Array of objects `[{id, start, end, text}, ...]`
5. **Segment Delivery:** Send all segments at once

---

## Next Steps

**Phase 2: Backend Services**

The following files need to be implemented:

1. `app/config.py` - Load environment variables (Deepgram API key, paths)
2. `app/utils/video_utils.py` - Extract video ID from YouTube URL
3. `app/services/youtube_service.py` - Download audio with yt-dlp
4. `app/services/deepgram_service.py` - Generate SRT using Deepgram API
5. `app/services/srt_parser.py` - Parse SRT to JSON array
6. `app/services/cache_service.py` - Read/write cache.json

**Estimated Time:** 2-3 hours

---

## Notes

- All empty Python files have `__init__.py` for proper module structure
- Project follows MVC architecture pattern
- Using FastAPI with Jinja2 (server-side rendering) instead of React for simplicity
- Frontend will use vanilla JavaScript (no frameworks)
- Reusing existing dictation logic from `tests/dictation.html`

---

## Status

✅ **Phase 1: COMPLETED**
- Directory structure: ✅
- Configuration files: ✅
- Documentation: ✅
- Ready for Phase 2: ✅